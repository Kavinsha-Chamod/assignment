<!DOCTYPE html>
<html>
<head>
    <title>Simple ERP - Customer Registration</title>
    <!-- Include Bootstrap CSS link -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h2>Customer Registration</h2>
        <form id="customerForm" novalidate>
            <div class="form-group">
                <label>Title:</label>
                <select class="form-control" name="title" required>
                    <option value="" disabled selected>Select Title</option>
                    <option value="Mr">Mr</option>
                    <option value="Mrs">Mrs</option>
                    <option value="Miss">Miss</option>
                    <option value="Dr">Dr</option>
                </select>
            </div>
            <div class="form-group">
                <label>First Name:</label>
                <input type="text" class="form-control" name="first_name" required>
            </div>
            <div class="form-group">
                <label>Middle Name:</label>
                <input type="text" class="form-control" name="middle_name" required>
            </div>
            <div class="form-group">
                <label>Last Name:</label>
                <input type="text" class="form-control" name="last_name" required>
            </div>
            <div class="form-group">
                <label>Contact Number:</label>
                <input type="text" class="form-control" name="contact_number">
            </div>
            <div class="form-group">
                <label>District:</label>
                <input type="text" class="form-control" name="district">
            </div>
            <button type="submit" class="btn btn-primary" id="customerSubmitBtn" onclick="insertCustomer($title, $firstName, $middleName, $lastName, $contactNumber, $district)">Register Customer</button>
        </form>
    </div>

    <!-- Include Bootstrap JS and jQuery links -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $("#customerForm").submit(function (event) {
            event.preventDefault(); // Prevent form submission

            // Serialize the form data
            const formData = $(this).serialize();

            // Send AJAX request to register_customer.php
            $.ajax({
                type: "POST",
                url: "register_customer.php",
                data: formData,
                success: function () {
                    alert("Customer registered successfully!");
                    $("#customerForm")[0].reset(); // Reset the form
                },
                error: function () {
                    alert("An error occurred while registering the customer.");
                }
            });
        });
    });
</script>

    <script>
        // Function to validate the customer registration form
        function validateCustomerForm() {
            const form = document.getElementById('customerForm');
            if (form.checkValidity() === false) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        }

        // Call the validation function when the form is submitted
        document.getElementById('customerForm').addEventListener('submit', validateCustomerForm);
    </script>
</body>
</html>
